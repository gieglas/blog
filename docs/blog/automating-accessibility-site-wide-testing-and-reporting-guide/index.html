<!doctype html>
<html lang="en">
    <head>
    <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- Social -->
        <meta property="og:description" content="Enhance your website&#39;s accessibility with automated testing and reporting. This guide walks you through the process of setting up and running accessibility checks across your site.">
        <meta property="og:title" content="Automating accessibility: Site-wide testing and reporting guide - Con&#39;s place">
        <meta property="og:url" content="https://consevangelou.com/">
        <meta property="og:type" content="website">
        <meta property="og:image" content="/img/pa11nty_report.png">
        <meta property="og:site_name" content="Con&#39;s place">
    
        <meta property="twitter:card" content="summary_large_image">
        <meta property="twitter:url" content="https://consevangelou.com/">
        <meta property="twitter:title" content="Automating accessibility: Site-wide testing and reporting guide - Con&#39;s place">
        <meta property="twitter:description" content="Enhance your website&#39;s accessibility with automated testing and reporting. This guide walks you through the process of setting up and running accessibility checks across your site.">
        <meta property="twitter:image" content="/img/pa11nty_report.png">
        <!-- Theme --> 
        <link rel="manifest" href="/manifest.json">
        <meta name="theme-color" content="#0090d3">
        <link rel="icon" type="image/png" sizes="48x48" href="/img/favicon-48x48.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144x144-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/img/apple-touch-icon-120x120-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/img/apple-touch-icon-114x114-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/img/apple-touch-icon-72x72-precomposed.png">
        <link rel="apple-touch-icon-precomposed" href="/img/apple-touch-icon-57x57-precomposed.png">
        <!-- Bootstrap CSS -->
        <link href="/css/main.css" rel="stylesheet" >
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@algolia/autocomplete-theme-classic"/>
        <link href="/css/docs.css" rel="stylesheet" >
        <!-- Prism Highlighter CSS -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-a11y-dark.min.css" rel="stylesheet">
        <title>Automating accessibility: Site-wide testing and reporting guide - Con&#39;s place</title>
        <meta name="description" content="Enhance your website&#39;s accessibility with automated testing and reporting. This guide walks you through the process of setting up and running accessibility checks across your site.">
        <meta name="author" content="Constantinos Evangelou">
    </head>
    <body>
        <!-- Skip link -->
        <a href="#mainContainer" class="govcy-skip-link govcy-mb-0">Skip to main content</a> 
        <!--Header-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Shadows+Into+Light+Two&display=swap" rel="stylesheet">
    <header class="govcy-container-fluid govcy-p-0 govcy-pt-2 govcy-m-0 govcy-position-relative govcy-d-print-none ce-header">
         <div class="govcy-container">
             <div class="row">
                <!--Displayed only on desktop-->
                <div class="d-none d-md-block govcy-p-0 govcy-m-0 ">
                    <a href="/" class="desktop-header personal-logo">
                        <img aria-hidden="true" alt="Con&#39;s place logo" src="/img/GieglasIconInverse.png">
                        Con&#39;s place
                    </a>
                </div>
                <!-- Diplay only on desktop end -->
                <span class="d-none d-md-block tagline govcy-mb-0 govcy-mt-1 govcy-ml-1">Be creative </span>
                <div class="govcy-header govcy-mb-0">
                    <nav class="navbar navbar-expand-md navbar-light">
                        <div class="govcy-container govcy-p-0 govcy-m-0 govcy-mr-2">
                            <!--Displayed only on mobile-->
                            <div class="d-md-none"><a href="/" class="mobile-header personal-logo"><img alt="Con&#39;s place" src="/img/GieglasIconInverse.png">Con&#39;s place</a></div>
                            <!-- Displayed only on mobile end -->
                            <!-- Displayed only on mobile button-->                            
                            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                                <span>
                                    <span style="vertical-align: middle !important;" class="govcy-mr-1 material-icons">menu</span>Menu 
                                </span>
                            </button>
                            <!-- Displayed only on mobile end -->
                            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                                <ul class="navbar-nav me-auto mb-2 mb-md-0 govcy-ml-3">
                                    <li class="nav-item">
                                    <a href="/"  class="nav-link" >
                                        Home
                                    </a>
                                    </li><li class="nav-item">
                                    <a href="/blog/"  class="nav-link active" aria-current="page" >
                                        Blog
                                    </a>
                                    </li><li class="nav-item">
                                    <a href="/about/"  class="nav-link" >
                                        About
                                    </a>
                                    </li><li class="nav-item">
                                    <a href="/search/"  class="nav-link" >
                                        Search
                                    </a>
                                    </li></ul>
                                
                                
                                
                                
                            </div>
                        </div>
                    </nav>
                    <!--Displayed only on mobile-->
                    <span class="d-md-none tagline govcy-mb-0 govcy-ml-3">Be creative </span>
                    <!-- Displayed only on mobile  end -->
                </div>
             </div>
         </div>
    </header>
    
        <!--Main-->
        <main class="govcy-container govcy-my-4" id="mainContainer">
            <div class="row">
                <div class="govcy-col-8 govcy-order-last">
                    <h1>Automating accessibility: Site-wide testing and reporting guide</h1>
                    <p class="post-date">Posted on 
                                      <time datetime="2024-12-23T00:00:00.000Z">23 December 2024</time> 
                                      • Tagged with 
                                      
                                            <a class="post-tag" href="/tags/dev">dev</a>
                                        
                                            <a class="post-tag" href="/tags/accessibility">accessibility</a>
                                        
                                            <a class="post-tag" href="/tags/eleventy">eleventy</a>
                                        
                                            <a class="post-tag" href="/tags/ci-cd">ci-cd</a>
                                        </p>
                    
                     
                    <img aria-hidden="true" src="/img/pa11nty_report.png" alt="Graphic for Automating accessibility: Site-wide testing and reporting guide" class="img-fluid pop-small govcy-mb-4"></a>
                    
                    <div class="blog-page">
                    <p>I’ve created a script to automate accessibility checks across my site, save the results in JSON, and display them on my <a href="/accessibility/">accessibility page</a>. While it may sound daunting, it actually wasn’t that hard to do, so I thought it might be interesting to share how I did it.</p>
<p>Before diving in, it’s important to note that automated testing provides valuable insights and suggestions for best practices, but it is not enough and it should not replace manual accessibility testing. Manual testing is crucial to ensure comprehensive accessibility compliance.</p>
<h2>Dependencies</h2>
<p>I use <a href="https://www.11ty.dev/" target="_blank">Eleventy</a> to build my site, which is a Node.js based static site generator, so it made sense to use <a href="https://nodejs.org/" target="_blank">Node.js</a> and NPM for my test script.</p>
<p>My weapon of choice for accessibility testing is <a href="https://github.com/pa11y/pa11y" target="_blank">Pa11y</a> which I use frequently to automate my tests. Here’s why I like Pa11y so much:</p>
<ul>
<li>Pa11y supports multiple accessibility standards, including WCAG 2.1, and is highly customizable allowing you to set the standard to test against.</li>
<li>It offers a simple command-line interface, making it easy to integrate into various workflows, including CI/CD pipelines.</li>
<li>It provides detailed reports of accessibility issues, including the type of issue, the element causing the issue, and suggestions for fixing it.</li>
<li>Pa11y can be easily integrated with other tools and frameworks, such as Eleventy, to automate the testing process and generate reports.</li>
<li>It has an active community, and it’s package health score is high on <a href="https://snyk.io/advisor/npm-package/pa11y" target="_blank">snyk Advisor</a>.</li>
</ul>
<p>So first things first, I needed to install Pa11y with this command</p>
<pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> <span class="token function">install</span> pa11y</code></pre>
<h2>The script</h2>
<p>The script is very simple really, it just goes through an array of pages, runs pa11y to do the tests, and save’s the results in a JSON file.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> Eleventy <span class="token keyword">from</span> <span class="token string">"@11ty/eleventy"</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> pa11y <span class="token keyword">from</span> <span class="token string">'pa11y'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> writeFile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'fs/promises'</span><span class="token punctuation">;</span><br><br><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> elev <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Eleventy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token comment">// retrieve Eleventy content</span><br>    <span class="token keyword">let</span> pagesJson <span class="token operator">=</span> <span class="token keyword">await</span> elev<span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token comment">// filter only pages ending with `/`. </span><br>    <span class="token keyword">const</span> filteredPagesJson <span class="token operator">=</span> pagesJson<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> item<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token comment">// define the server URL. Note this means the test is run on localhost</span><br>    <span class="token keyword">let</span> serverURL <span class="token operator">=</span> <span class="token string">"http://localhost:8080"</span><span class="token punctuation">;</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">## Run tests</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token comment">// run tests</span><br>    <span class="token keyword">await</span> <span class="token function">testAccessibilityAndSave</span><span class="token punctuation">(</span>filteredPagesJson<span class="token punctuation">,</span> serverURL<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">testAccessibilityAndSave</span><span class="token punctuation">(</span><span class="token parameter">pages<span class="token punctuation">,</span>serverURL</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> resultsArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">let</span> failed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// Track failures</span><br>    <span class="token comment">// for each page</span><br>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> page <span class="token keyword">of</span> pages<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>page<span class="token punctuation">.</span>outputPath<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">".html"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">try</span> <span class="token punctuation">{</span><br>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Testing </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>page<span class="token punctuation">.</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                <span class="token comment">// run pa11y</span><br>                <span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">pa11y</span><span class="token punctuation">(</span>serverURL <span class="token operator">+</span> page<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span><br>                    <span class="token literal-property property">standard</span><span class="token operator">:</span> <span class="token string">'WCAG2AA'</span><br>                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                <span class="token comment">// push results in an array</span><br>                resultsArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">url</span><span class="token operator">:</span> page<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token literal-property property">issues</span><span class="token operator">:</span> results<span class="token punctuation">.</span>issues <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                <span class="token comment">// if there are accessibility issues write on the console</span><br>                <span class="token keyword">if</span> <span class="token punctuation">(</span>results<span class="token punctuation">.</span>issues<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Accessibility issues found in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>page<span class="token punctuation">.</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>results<span class="token punctuation">.</span>issues<span class="token punctuation">)</span><span class="token punctuation">;</span><br>                    failed <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// Mark as failed if any issues are found</span><br>                <span class="token punctuation">}</span><br>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Error testing </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>page<span class="token punctuation">.</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><br>                failed <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// Mark as failed if an error occurs</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>    <br>    <span class="token keyword">try</span> <span class="token punctuation">{</span><br>        <span class="token comment">// add date and results to the json</span><br>        <span class="token keyword">const</span> resultsJSON <span class="token operator">=</span> <span class="token punctuation">{</span><br>            <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'T'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>            <span class="token literal-property property">results</span><span class="token operator">:</span> resultsArray<br>        <span class="token punctuation">}</span><br>        <span class="token comment">// write to file on special `_data` folder so Eleventy can convert it into a collection</span><br>        <span class="token keyword">await</span> <span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'src/_data/accessibilityresults.json'</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>resultsJSON<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Results saved to `src/_data/accessibilityresults.json`'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>fileError<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Error saving results:'</span><span class="token punctuation">,</span> fileError<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        failed <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// Mark as failed if an error occurs</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// Exit with code 1 if any tests failed, otherwise exit with code 0</span><br>    process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span>failed <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>I’ve added comments to clarify each step, but here’s a quick summary for better understanding.</p>
<h3>Imports</h3>
<p>I import <code>pa11y</code> to run the tests and <code>writeFile</code> to write the results in a file. I also import <code>Eleventy</code> so that I can get the pages Eleventy has built. If you don’t use Eleventy you will not need this.</p>
<h3>Get the pages to test</h3>
<p>Again I use Eleventy so I get the pages using it’s API as follows:</p>
<pre class="language-js"><code class="language-js"> <span class="token keyword">let</span> elev <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Eleventy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// retrieve Eleventy content</span><br><span class="token keyword">let</span> pagesJson <span class="token operator">=</span> <span class="token keyword">await</span> elev<span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// filter only pages ending with `/`. </span><br><span class="token keyword">const</span> filteredPagesJson <span class="token operator">=</span> pagesJson<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> item<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>You will notice that I filter the results to items with URL that ends with <code>/</code>. This is because I also build other files such as <code>sitemap.xml</code> or <code>feed.xml</code> which I want to exclude from my tests.</p>
<p>If you do not use Eleventy you probably need to provide the URLs yourself.</p>
<h3>Perform the test</h3>
<p>All the magic is done with in this line</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">pa11y</span><span class="token punctuation">(</span>serverURL <span class="token operator">+</span> page<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span><br>	<span class="token literal-property property">standard</span><span class="token operator">:</span> <span class="token string">'WCAG2AA'</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>The script passes the URL and the standard to test with, which in our case is WCAG2AA.</p>
<p>If any issues are found on a given URL, they will be returned in an array in <code>results.issues</code>.</p>
<p>All the results are pushed into the <code>resultsArray</code>.</p>
<h3>Save results in JSON</h3>
<p>Before the results are saved, the script adds the date it run in this code segment:</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// add date and results to the json</span><br><span class="token keyword">const</span> resultsJSON <span class="token operator">=</span> <span class="token punctuation">{</span><br>	<span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'T'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>	<span class="token literal-property property">results</span><span class="token operator">:</span> resultsArray<br><span class="token punctuation">}</span></code></pre>
<p>It then writes the results in <code>src/_data/accessibilityresults.json</code>. You can really save them wherever you like. I opted to use the folder <code>_data</code>, because Eleventy treats this sort of like a magic folder, and everything inside it gets built into a collection which I can use in my pages.</p>
<h2>Running the script</h2>
<p>Pa11y needs to be able to access the pages to test them, so if you run your tests on the <code>localhost</code> as I do, make sure the local server is up and running before you use the script.</p>
<p>All you need to do to run the script is this:</p>
<pre class="language-shell"><code class="language-shell"><span class="token function">node</span> a11y.mjs</code></pre>
<h2>Using it in a CI/CD pipeline</h2>
<p>I use my script in my development workflow, but it can easily be include in a CI/CD pipeline. The script indicates success or failure with the code segment below, so it should be CI/CD ready:</p>
<pre class="language-js"><code class="language-js">process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span>failed <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>I haven’t tried it my self, but you could create a GitHub Action by creating a file under <code>.github/workflows/accessibility-test.yml</code> like this (note: I got this script with the help of AI, I did not test it my self, so it might need some changes, or updates):</p>
<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">name</span><span class="token punctuation">:</span> Accessibility Test<br><br><span class="token key atrule">on</span><span class="token punctuation">:</span><br>  <span class="token key atrule">push</span><span class="token punctuation">:</span><br>    <span class="token key atrule">branches</span><span class="token punctuation">:</span><br>      <span class="token punctuation">-</span> main<br>  <span class="token key atrule">pull_request</span><span class="token punctuation">:</span><br><br><span class="token key atrule">jobs</span><span class="token punctuation">:</span><br>  <span class="token key atrule">accessibility</span><span class="token punctuation">:</span><br>    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest<br><br>    <span class="token key atrule">steps</span><span class="token punctuation">:</span><br>      <span class="token comment"># Checkout the code</span><br>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout Code<br>        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v3<br><br>      <span class="token comment"># Set up Node.js</span><br>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Setup Node.js<br>        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v3<br>        <span class="token key atrule">with</span><span class="token punctuation">:</span><br>          <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token number">18</span><br><br>      <span class="token comment"># Install dependencies</span><br>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install Dependencies<br>        <span class="token key atrule">run</span><span class="token punctuation">:</span> npm ci<br><br>      <span class="token comment"># Build the site</span><br>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build Site<br>        <span class="token key atrule">run</span><span class="token punctuation">:</span> npx @11ty/eleventy<br><br>      <span class="token comment"># Start a server for the static site</span><br>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Start Static Server<br>        <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string"><br>          npx http-server _site -p 8080 &amp;<br>          echo $! > server.pid</span><br>        <span class="token key atrule">env</span><span class="token punctuation">:</span><br>          <span class="token key atrule">CI</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><br><br>      <span class="token comment"># Run Accessibility Test</span><br>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Run Accessibility Test<br>        <span class="token key atrule">run</span><span class="token punctuation">:</span> node a11y.mjs<br><br>      <span class="token comment"># Save Results as Artifact</span><br>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Upload Accessibility Results<br>        <span class="token key atrule">if</span><span class="token punctuation">:</span> always()<br>        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/upload<span class="token punctuation">-</span>artifact@v3<br>        <span class="token key atrule">with</span><span class="token punctuation">:</span><br>          <span class="token key atrule">name</span><span class="token punctuation">:</span> accessibility<span class="token punctuation">-</span>results<br>          <span class="token key atrule">path</span><span class="token punctuation">:</span> src/_data/accessibilityresults.json<br><br>      <span class="token comment"># Stop the server</span><br>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Stop Static Server<br>        <span class="token key atrule">if</span><span class="token punctuation">:</span> always()<br>        <span class="token key atrule">run</span><span class="token punctuation">:</span> kill $(cat server.pid)<br>        </code></pre>
<h2>Using the results files in Eleventy</h2>
<p>This section is specifically for those who use Eleventy, but the underlying principles can be adapted for other implementations as well.</p>
<h3>Show the report in a page</h3>
<p>As I mentioned before, Eleventy treats the <code>_data</code> folder like a magic folder and automatically turns all <code>json</code> files into collections. This makes my life very easy. All I need to do to show the results in a page, is to use one of the Eleventy supported template engines and loop through the <code>accessibilityresults</code> collection.</p>
<p>I like using <a href="https://mozilla.github.io/nunjucks/" target="_blank">Nunjucks</a> so in my <code>accessibility.njk</code> file I use the following code segment to display the report:</p>
<pre class="language-html"><code class="language-html"><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>report<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Report<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>This report was created on <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>time</span> <span class="token attr-name">datetime</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ accessibilityresults.date }}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ accessibilityresults.date | dateOnly }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>time</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span> based on an automated test performed with <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://pa11y.org/<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>pa11y<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">></span></span> <br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thead</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Score<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Issues<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thead</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span><span class="token punctuation">></span></span><br>    {% for result in accessibilityresults.results %}<br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ result.url }}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ result.url }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>{% if result.issues.length > 0 %}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fail-tag<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Fail<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>{% else %}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>success-tag<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Pass<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>{% endif %}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span><br>             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span><span class="token punctuation">></span></span><br>                {% for issue in result.issues %}<br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>{{ issue.message }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>                {% endfor %}<br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span><br>    {% endfor %}<br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span><br></code></pre>
<p>Oh, I forgot to mention, I’ve also created the following CSS classes for the pass and fail tags:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.fail-tag</span> <span class="token punctuation">{</span><br>    <span class="token property">margin-left</span><span class="token punctuation">:</span> .35rem<span class="token punctuation">;</span><br>    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span><br>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span><br>    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span><br>    <span class="token property">padding</span><span class="token punctuation">:</span> 3px 12px<span class="token punctuation">;</span><br>    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span><br>    <span class="token property">vertical-align</span><span class="token punctuation">:</span> top<span class="token punctuation">;</span><br>    <span class="token property">width</span><span class="token punctuation">:</span> fit-content<span class="token punctuation">;</span><br>    <span class="token property">width</span><span class="token punctuation">:</span> -moz-fit-content<span class="token punctuation">;</span><br>    <span class="token property">background</span><span class="token punctuation">:</span> #D4351C<span class="token punctuation">;</span> <br>    <span class="token property">color</span><span class="token punctuation">:</span> #ffffff<span class="token punctuation">;</span><br>    <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token selector">.success-tag</span> <span class="token punctuation">{</span><br>    <span class="token property">margin-left</span><span class="token punctuation">:</span> .35rem<span class="token punctuation">;</span><br>    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span><br>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span><br>    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span><br>    <span class="token property">padding</span><span class="token punctuation">:</span> 3px 12px<span class="token punctuation">;</span><br>    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span><br>    <span class="token property">vertical-align</span><span class="token punctuation">:</span> top<span class="token punctuation">;</span><br>    <span class="token property">width</span><span class="token punctuation">:</span> fit-content<span class="token punctuation">;</span><br>    <span class="token property">width</span><span class="token punctuation">:</span> -moz-fit-content<span class="token punctuation">;</span><br>    <span class="token property">background</span><span class="token punctuation">:</span> #00703C<span class="token punctuation">;</span> <br>    <span class="token property">color</span><span class="token punctuation">:</span> #ffffff<span class="token punctuation">;</span><br>    <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h3>Bonus: show a success or fail badge</h3>
<p>I also show a success or fail badge of my test on every page. To do that, I added a global data in my <code>.eleventy.js</code> file with this code segment:</p>
<pre class="language-js"><code class="language-js">  eleventyConfig<span class="token punctuation">.</span><span class="token function">addGlobalData</span><span class="token punctuation">(</span><span class="token string">"accessibilityStatus"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">"src/_data/accessibilityresults.json"</span><span class="token punctuation">,</span> <span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> allNoIssues <span class="token operator">=</span> data<span class="token punctuation">.</span>results<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token parameter">page</span> <span class="token operator">=></span> page<span class="token punctuation">.</span>issues<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> <span class="token punctuation">{</span><br>      <span class="token literal-property property">date</span><span class="token operator">:</span> data<span class="token punctuation">.</span>date<span class="token punctuation">,</span><br>      <span class="token literal-property property">results</span><span class="token operator">:</span> data<span class="token punctuation">.</span>results<span class="token punctuation">,</span><br>      <span class="token literal-property property">allNoIssues</span><span class="token operator">:</span> allNoIssues<br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>I then use the <code>accessibilityStatus</code> in my njk template like this:</p>
<pre class="language-html"><code class="language-html"><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ '/accessibility/#report' }}<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>general-a11y-badge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>	{% if accessibilityStatus.allNoIssues %}        <br>			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://a11ybadges.com/badge?logo=smile<span class="token entity named-entity" title="&amp;">&amp;amp;</span>text=a11y_passed<span class="token entity named-entity" title="&amp;">&amp;amp;</span>badgeColor=green<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ site.localization[locale].a11y_success}}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>	{% else %}<br>			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://a11ybadges.com/badge?logo=frown<span class="token entity named-entity" title="&amp;">&amp;amp;</span>text=a11y_failed<span class="token entity named-entity" title="&amp;">&amp;amp;</span>badgeColor=red<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ site.localization[locale].a11y_fail}}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>	{% endif %}<br> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br> </code></pre>
<p>I use <a href="https://github.com/a11y-badges/a11y-badges" target="_blank">a11y-badges</a> to create the badges, which is a more accessible version of <a href="https://shields.io/" target="_blank">shields.io</a>.</p>
<p>Here are the css classes I use for the badges:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.general-a11y-badge img</span> <span class="token punctuation">{</span><br>    <span class="token property">width</span><span class="token punctuation">:</span> auto <span class="token important">!important</span><span class="token punctuation">;</span><br>    <span class="token property">height</span><span class="token punctuation">:</span> 24px <span class="token important">!important</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h2>Conclusion</h2>
<p>So there you have it! I hope this post can help you implement your own automated accessibility check process.</p>
<p>Automating accessibility checks can save you a lot of time and help you maintain a more accessible website. However, remember that automated tests are not a substitute for manual testing. Use them as a tool to catch common issues and guide your manual testing efforts.</p>
<p>Happy testing!</p>

                    </div>
                </div>
            </div>
        </main>
        <!-- Footer -->
            <footer class="govcy-container-fluid govcy-p-3 govcy-pl-0 govcy-d-print-none">
        <div class="govcy-container">
            <div class="row">   
                <div class="govcy-footer">
                    <ul class="govcy-d-inline-block govcy-m-0  govcy-pl-0 govcy-efs-medium"><li>
                                <a href="/">
                                    Home
                                </a>
                            </li><li>
                                <a href="/blog/">
                                    Blog
                                </a>
                            </li><li>
                                <a href="/about/">
                                    About
                                </a>
                            </li><li>
                                <a href="/search/">
                                    Search
                                </a>
                            </li><li><a href="/feed.xml">Feed</a></li>
                        <li>
                            <a href="/accessibility/">
                                Accessibility
                            </a>
                        </li>
                        <li class="govcy-d-block govcy-text-dark">
                            <a href="/accessibility/#report" class="general-a11y-badge">
                                        
                                        <img src="https://a11ybadges.com/badge?logo=smile&amp;text=a11y_passed&amp;badgeColor=green" alt="Accessibility check passed" class="success-a11y-badge">
                                
                             </a>
                        </li>
                        <li class="govcy-d-block govcy-text-dark">© Constantinos Evangelou, 2024</li>
                        <li class="govcy-d-block govcy-text-dark">Powered by <a href='https://www.11ty.dev/' target='_blank'>Eleventy</a> and <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a>.</li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>
        <!-- js stuff -->
                <!-- Option 1: Bootstrap Bundle with Popper -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
               
    </body>
</html>